{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/amykang/Desktop/BrainStation/Projects/amy-kang-brainflix/sprint-three/client-side/src/components/HomePage/HomePage.js\";\nimport './HomePage.scss';\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport MainVideo from '../MainVideo/MainVideo';\nimport NextVideos from '../NextVideos/NextVideos';\nimport Comments from '../Comments/Comments';\nimport Content from '../Content/Content';\nimport { v4 as uuid } from 'uuid'; // Variables \n\nlet firstVideoId = '1af0jruup5gu'; // HomePage is a statefull component that contains life cycle methods and returns JSX for the Home Page \n\nclass HomePage extends Component {\n  constructor() {\n    super();\n    this.state = {\n      currentVideo: {\n        comments: [{\n          comment: \"\"\n        }]\n      },\n      videoList: [],\n      likeToggle: false\n    };\n    this.submitHandler = this.submitHandler.bind(this);\n    this.likeHandler = this.likeHandler.bind(this);\n  }\n\n  likeHandler(e, currentVideo) {\n    if (this.state.likeToggle === false) {\n      axios.post('http://localhost:8000/videos/' + currentVideo.id + '/likes').then(res => {\n        this.setState({\n          currentVideo: res.data\n        });\n      });\n      this.setState({\n        likeToggle: true\n      });\n    } else if (this.state.likeToggle === true) {\n      axios.post('http://localhost:8000/videos/' + currentVideo.id + '/likes/delete').then(res => {\n        this.setState({\n          currentVideo: res.data\n        });\n      });\n      this.setState({\n        likeToggle: false\n      });\n    }\n  }\n\n  submitHandler(e, currentVideoId) {\n    e.preventDefault();\n    let newComment = {\n      name: \"BrainFlix User\",\n      comment: e.target.commentInput.value,\n      id: uuid(),\n      videoid: currentVideoId,\n      likes: 0,\n      timestamp: Date.now()\n    };\n    axios.post('http://localhost:8000/comments/' + currentVideoId, newComment).then(res => {\n      let currentVideoState = this.state.currentVideo;\n      let videoComments = this.state.currentVideo.comments;\n      videoComments.push(res.data);\n      currentVideoState.comments = videoComments;\n      this.setState({\n        currentVideo: currentVideoState\n      });\n    }).catch(err => console.log(err));\n    let commentForm = document.querySelector('.comment-form');\n    commentForm.reset();\n  }\n\n  componentDidMount(event) {\n    axios.get('http://localhost:8000/videos/' + firstVideoId).then(res => {\n      this.setState({\n        currentVideo: res.data\n      });\n    }).catch(err => console.log(\"error:\", err));\n    axios.get('http://localhost:8000/videos').then(res => {\n      let filteredList = res.data.filter(video => video.id !== this.state.currentVideo.id);\n      this.setState({\n        videoList: filteredList\n      });\n    }).catch(err => console.log(\"error:\", err));\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const {\n      match\n    } = this.props;\n\n    if (typeof match.params.videoId !== 'undefined') {\n      if (match.params.videoId !== this.state.currentVideo.id) {\n        axios.get('http://localhost:8000/videos/' + match.params.videoId).then(res => {\n          this.setState({\n            currentVideo: res.data\n          });\n        }).catch(err => console.log(err));\n        axios.get('http://localhost:8000/videos/').then(res => {\n          let filteredList = res.data.filter(video => video.id !== this.state.currentVideo.id);\n          this.setState({\n            videoList: filteredList\n          });\n        });\n      }\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"main\",\n      children: [/*#__PURE__*/_jsxDEV(MainVideo, {\n        currentVideo: this.state.currentVideo\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"main__content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"main__content-texts\",\n          children: [/*#__PURE__*/_jsxDEV(Content, {\n            currentVideo: this.state.currentVideo,\n            likeHandler: this.likeHandler\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Comments, {\n            submitHandler: this.submitHandler,\n            currentVideo: this.state.currentVideo\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(NextVideos, {\n          videoList: this.state.videoList\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default HomePage;","map":{"version":3,"sources":["/Users/amykang/Desktop/BrainStation/Projects/amy-kang-brainflix/sprint-three/client-side/src/components/HomePage/HomePage.js"],"names":["React","Component","axios","MainVideo","NextVideos","Comments","Content","v4","uuid","firstVideoId","HomePage","constructor","state","currentVideo","comments","comment","videoList","likeToggle","submitHandler","bind","likeHandler","e","post","id","then","res","setState","data","currentVideoId","preventDefault","newComment","name","target","commentInput","value","videoid","likes","timestamp","Date","now","currentVideoState","videoComments","push","catch","err","console","log","commentForm","document","querySelector","reset","componentDidMount","event","get","filteredList","filter","video","componentDidUpdate","prevProps","prevState","match","props","params","videoId","render"],"mappings":";;AAAA,OAAO,iBAAP;AACA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,wBAAtB;AACA,OAAOC,UAAP,MAAuB,0BAAvB;AACA,OAAOC,QAAP,MAAqB,sBAArB;AACA,OAAOC,OAAP,MAAoB,oBAApB;AACA,SAAQC,EAAE,IAAIC,IAAd,QAAyB,MAAzB,C,CAGA;;AACA,IAAIC,YAAY,GAAG,cAAnB,C,CAEA;;AACA,MAAMC,QAAN,SAAuBT,SAAvB,CAAiC;AAC7BU,EAAAA,WAAW,GAAE;AACT;AACA,SAAKC,KAAL,GAAa;AACTC,MAAAA,YAAY,EAAE;AAACC,QAAAA,QAAQ,EAAE,CAAC;AAACC,UAAAA,OAAO,EAAE;AAAV,SAAD;AAAX,OADL;AAETC,MAAAA,SAAS,EAAE,EAFF;AAGTC,MAAAA,UAAU,EAAE;AAHH,KAAb;AAMA,SAAKC,aAAL,GAAqB,KAAKA,aAAL,CAAmBC,IAAnB,CAAwB,IAAxB,CAArB;AACA,SAAKC,WAAL,GAAmB,KAAKA,WAAL,CAAiBD,IAAjB,CAAsB,IAAtB,CAAnB;AACH;;AAEDC,EAAAA,WAAW,CAACC,CAAD,EAAIR,YAAJ,EAAkB;AACzB,QAAI,KAAKD,KAAL,CAAWK,UAAX,KAA0B,KAA9B,EAAqC;AACjCf,MAAAA,KAAK,CAACoB,IAAN,CAAW,kCAAkCT,YAAY,CAACU,EAA/C,GAAoD,QAA/D,EACCC,IADD,CACMC,GAAG,IAAI;AACT,aAAKC,QAAL,CAAc;AACVb,UAAAA,YAAY,EAAEY,GAAG,CAACE;AADR,SAAd;AAGH,OALD;AAMA,WAAKD,QAAL,CAAc;AACVT,QAAAA,UAAU,EAAE;AADF,OAAd;AAGH,KAVD,MAUO,IAAI,KAAKL,KAAL,CAAWK,UAAX,KAAyB,IAA7B,EAAmC;AACtCf,MAAAA,KAAK,CAACoB,IAAN,CAAW,kCAAkCT,YAAY,CAACU,EAA/C,GAAoD,eAA/D,EACCC,IADD,CACMC,GAAG,IAAI;AACT,aAAKC,QAAL,CAAc;AACVb,UAAAA,YAAY,EAAEY,GAAG,CAACE;AADR,SAAd;AAGH,OALD;AAMA,WAAKD,QAAL,CAAc;AACVT,QAAAA,UAAU,EAAE;AADF,OAAd;AAGH;AACJ;;AAEDC,EAAAA,aAAa,CAACG,CAAD,EAAIO,cAAJ,EAAoB;AAC7BP,IAAAA,CAAC,CAACQ,cAAF;AACA,QAAIC,UAAU,GAAG;AACbC,MAAAA,IAAI,EAAE,gBADO;AAEbhB,MAAAA,OAAO,EAAEM,CAAC,CAACW,MAAF,CAASC,YAAT,CAAsBC,KAFlB;AAGbX,MAAAA,EAAE,EAAEf,IAAI,EAHK;AAIb2B,MAAAA,OAAO,EAAEP,cAJI;AAKbQ,MAAAA,KAAK,EAAE,CALM;AAMbC,MAAAA,SAAS,EAAEC,IAAI,CAACC,GAAL;AANE,KAAjB;AAQArC,IAAAA,KAAK,CACAoB,IADL,CACW,oCAAoCM,cAD/C,EACgEE,UADhE,EAEKN,IAFL,CAEUC,GAAG,IAAG;AACR,UAAIe,iBAAiB,GAAG,KAAK5B,KAAL,CAAWC,YAAnC;AACA,UAAI4B,aAAa,GAAG,KAAK7B,KAAL,CAAWC,YAAX,CAAwBC,QAA5C;AACA2B,MAAAA,aAAa,CAACC,IAAd,CAAmBjB,GAAG,CAACE,IAAvB;AACAa,MAAAA,iBAAiB,CAAC1B,QAAlB,GAA6B2B,aAA7B;AACA,WAAKf,QAAL,CAAc;AACVb,QAAAA,YAAY,EAAE2B;AADJ,OAAd;AAGH,KAVL,EAWKG,KAXL,CAWYC,GAAD,IAASC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAXpB;AAYA,QAAIG,WAAW,GAAGC,QAAQ,CAACC,aAAT,CAAuB,eAAvB,CAAlB;AACAF,IAAAA,WAAW,CAACG,KAAZ;AACH;;AAEDC,EAAAA,iBAAiB,CAACC,KAAD,EAAQ;AACrBlD,IAAAA,KAAK,CACAmD,GADL,CACS,kCAAkC5C,YAD3C,EAEKe,IAFL,CAEUC,GAAG,IAAG;AACR,WAAKC,QAAL,CAAc;AACVb,QAAAA,YAAY,EAAEY,GAAG,CAACE;AADR,OAAd;AAGH,KANL,EAOKgB,KAPL,CAOYC,GAAD,IAAOC,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBF,GAAtB,CAPlB;AAQA1C,IAAAA,KAAK,CACAmD,GADL,CACS,8BADT,EAEK7B,IAFL,CAEUC,GAAG,IAAI;AACT,UAAI6B,YAAY,GAAG7B,GAAG,CAACE,IAAJ,CAAS4B,MAAT,CAAiBC,KAAD,IAASA,KAAK,CAACjC,EAAN,KAAa,KAAKX,KAAL,CAAWC,YAAX,CAAwBU,EAA9D,CAAnB;AACA,WAAKG,QAAL,CAAc;AACVV,QAAAA,SAAS,EAAEsC;AADD,OAAd;AAGH,KAPL,EAQKX,KARL,CAQWC,GAAG,IAAEC,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBF,GAAtB,CARhB;AAUH;;AAEDa,EAAAA,kBAAkB,CAACC,SAAD,EAAYC,SAAZ,EAAuB;AACrC,UAAM;AAACC,MAAAA;AAAD,QAAU,KAAKC,KAArB;;AACA,QAAI,OAAOD,KAAK,CAACE,MAAN,CAAaC,OAApB,KAAgC,WAApC,EAAiD;AAC7C,UAAIH,KAAK,CAACE,MAAN,CAAaC,OAAb,KAAyB,KAAKnD,KAAL,CAAWC,YAAX,CAAwBU,EAArD,EAAyD;AACrDrB,QAAAA,KAAK,CACAmD,GADL,CACS,kCAAiCO,KAAK,CAACE,MAAN,CAAaC,OADvD,EAEKvC,IAFL,CAEUC,GAAG,IAAG;AACR,eAAKC,QAAL,CAAc;AACVb,YAAAA,YAAY,EAAEY,GAAG,CAACE;AADR,WAAd;AAGH,SANL,EAOKgB,KAPL,CAOWC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAPlB;AAQA1C,QAAAA,KAAK,CACAmD,GADL,CACS,+BADT,EAEK7B,IAFL,CAEUC,GAAG,IAAI;AACT,cAAI6B,YAAY,GAAG7B,GAAG,CAACE,IAAJ,CAAS4B,MAAT,CAAiBC,KAAD,IAAWA,KAAK,CAACjC,EAAN,KAAa,KAAKX,KAAL,CAAWC,YAAX,CAAwBU,EAAhE,CAAnB;AACA,eAAKG,QAAL,CAAc;AACVV,YAAAA,SAAS,EAAEsC;AADD,WAAd;AAGH,SAPL;AAQH;AACJ;AACJ;;AAEDU,EAAAA,MAAM,GAAG;AACL,wBACI;AAAM,MAAA,SAAS,EAAC,MAAhB;AAAA,8BACI,QAAC,SAAD;AAAW,QAAA,YAAY,EAAI,KAAKpD,KAAL,CAAWC;AAAtC;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI;AAAK,QAAA,SAAS,EAAC,eAAf;AAAA,gCACI;AAAK,UAAA,SAAS,EAAG,qBAAjB;AAAA,kCACI,QAAC,OAAD;AAAS,YAAA,YAAY,EAAI,KAAKD,KAAL,CAAWC,YAApC;AAAkD,YAAA,WAAW,EAAE,KAAKO;AAApE;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI,QAAC,QAAD;AAAU,YAAA,aAAa,EAAE,KAAKF,aAA9B;AAA6C,YAAA,YAAY,EAAE,KAAKN,KAAL,CAAWC;AAAtE;AAAA;AAAA;AAAA;AAAA,kBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAKI,QAAC,UAAD;AAAY,UAAA,SAAS,EAAE,KAAKD,KAAL,CAAWI;AAAlC;AAAA;AAAA;AAAA;AAAA,gBALJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ;AAYH;;AAzH4B;;AA4HjC,eAAeN,QAAf","sourcesContent":["import './HomePage.scss';\nimport React, {Component} from 'react'\nimport axios from 'axios'\nimport MainVideo from '../MainVideo/MainVideo'\nimport NextVideos from '../NextVideos/NextVideos'\nimport Comments from '../Comments/Comments';\nimport Content from '../Content/Content';\nimport {v4 as uuid} from 'uuid'\n\n\n// Variables \nlet firstVideoId = '1af0jruup5gu';\n\n// HomePage is a statefull component that contains life cycle methods and returns JSX for the Home Page \nclass HomePage extends Component {\n    constructor(){\n        super();\n        this.state = {\n            currentVideo: {comments: [{comment: \"\"}]},\n            videoList: [], \n            likeToggle: false,\n            \n          } \n        this.submitHandler = this.submitHandler.bind(this);\n        this.likeHandler = this.likeHandler.bind(this);\n    }\n\n    likeHandler(e, currentVideo) {\n        if (this.state.likeToggle === false) {\n            axios.post('http://localhost:8000/videos/' + currentVideo.id + '/likes')\n            .then(res => {\n                this.setState({\n                    currentVideo: res.data\n                })\n            })\n            this.setState({\n                likeToggle: true\n            })\n        } else if (this.state.likeToggle ===true) {\n            axios.post('http://localhost:8000/videos/' + currentVideo.id + '/likes/delete')\n            .then(res => {\n                this.setState({\n                    currentVideo: res.data\n                })\n            })\n            this.setState({\n                likeToggle: false\n            })\n        }\n    }\n\n    submitHandler(e, currentVideoId) {\n        e.preventDefault();\n        let newComment = {\n            name: \"BrainFlix User\",\n            comment: e.target.commentInput.value,\n            id: uuid(),\n            videoid: currentVideoId, \n            likes: 0, \n            timestamp: Date.now()\n        }\n        axios\n            .post(('http://localhost:8000/comments/' + currentVideoId), newComment)\n            .then(res=> {\n                let currentVideoState = this.state.currentVideo; \n                let videoComments = this.state.currentVideo.comments;\n                videoComments.push(res.data);\n                currentVideoState.comments = videoComments;\n                this.setState({\n                    currentVideo: currentVideoState,\n                })\n            })\n            .catch((err) => console.log(err))\n        let commentForm = document.querySelector('.comment-form');\n        commentForm.reset();\n    }\n  \n    componentDidMount(event) {\n        axios\n            .get('http://localhost:8000/videos/' + firstVideoId)\n            .then(res=> {\n                this.setState({\n                    currentVideo: res.data,\n                })\n            })\n            .catch((err)=>console.log(\"error:\", err))\n        axios\n            .get('http://localhost:8000/videos')\n            .then(res => {\n                let filteredList = res.data.filter((video)=>video.id !== this.state.currentVideo.id)\n                this.setState({\n                    videoList: filteredList\n                })\n            })\n            .catch(err=>console.log(\"error:\", err))\n        \n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        const {match} = this.props\n        if (typeof match.params.videoId !== 'undefined') {\n            if (match.params.videoId !== this.state.currentVideo.id) {\n                axios\n                    .get('http://localhost:8000/videos/'+ match.params.videoId)\n                    .then(res=> {\n                        this.setState({\n                            currentVideo: res.data,\n                        })\n                    })\n                    .catch(err => console.log(err))\n                axios\n                    .get('http://localhost:8000/videos/')\n                    .then(res => {\n                        let filteredList = res.data.filter((video)=> (video.id !== this.state.currentVideo.id))\n                        this.setState({\n                            videoList: filteredList\n                        })\n                    })\n            } \n        } \n    }\n      \n    render() {\n        return (\n            <main className=\"main\">\n                <MainVideo currentVideo = {this.state.currentVideo} />\n                <div className=\"main__content\">\n                    <div className = \"main__content-texts\">\n                        <Content currentVideo = {this.state.currentVideo} likeHandler={this.likeHandler}/>\n                        <Comments submitHandler={this.submitHandler} currentVideo={this.state.currentVideo} />\n                    </div>\n                    <NextVideos videoList={this.state.videoList} />\n                </div>\n            </main>\n        )\n    }\n}\n\nexport default HomePage"]},"metadata":{},"sourceType":"module"}